{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-5">
  <div class="row align-items-center">
    <!-- Left Content -->
    <div class="col-md-6 text-center ">
      <h3 class="fw-bold pb-3" style="color: #0c4b65;">{{ content.title }}</h3>
      <p class="text-dark fs-5 text-center">{{ content.subtitle }}</p>
      <a href="{% url 'buy:buy_bike' %}" class="btn text-white" style="background-color: #0c4b65;">{{ content.button_text }}</a>
    </div>

    <!-- Right: Bike Carousel -->
   <div class="col-md-6 text-center">
  <div class="bike-image-wrapper d-inline-block" style="height: 400px; max-width: 500px; position: relative;">
    <!-- <div class="bike-background"></div> -->
    <img id="bikeImage" src="{{ carousel_images.0.image.url }}" alt="Bike Image" class="img-fluid" style="height: 100%; z-index: 2; position: relative;">
  </div>
</div>

  </div>
</div>

<!-- Rider Section -->
<div class="container py-5">
  <div class="row align-items-center">
    <div class="col-md-5">
      <img src="{{ rider.image.url }}" alt="Scooter Rider" class="img-fluid">
    </div>
    <div class="col-md-7 text-center">
      <p class="fs-5">{{ rider.content }}</p>
      <a href="{% url 'about_us' %}" class="btn text-white" style="background-color: #0c4b65;">{{ rider.button_text }}</a>
    </div>
  </div>
</div>
<!-- Support Section -->
<section class="container my-5">
  <h2 class="text-center mb-4">Get the Support You Need</h2>
  <div class="row text-center justify-content-center">
    {% for feature in support_features %}
      <div class="col-md-3 mb-4">
        <div class="support-arrow d-flex flex-column align-items-center">
          <img src="{{ feature.image.url }}" class="img-fluid mb-3" alt="{{ feature.title }}" style="max-height: 100px;">
          <h5 class="fw-bold" style="color: #0c4b65;">{{ feature.title }}</h5>
          <p class="fs-5">{{ feature.description }}</p>
        </div>
      </div>
    {% endfor %}
  </div>
</section>


<!-- Ratings -->
 <section class="py-5 mb-4" style="background: linear-gradient(135deg, #126263, #196d68); border-radius: 2rem;">
  <div class="container text-white">
    <div class="row align-items-center justify-content-between text-center ">
      
      <!-- Heading -->
      <div class="col-12 mb-4 d-flex justify-content-between align-items-center flex-wrap">
        <h3 class="fw-bold mb-0 text-white">Over <span class="fw-bolder">15000+</span> Satisfied Customers</h3>
        <span class="fs-2 fw-bold text-white" style="font-family: cursive; text-shadow: 1px 1px 5px #000;">Drive<span style="color: #a5fff7;">RP</span></span>
      </div>

      <!-- Metrics -->
      <div class="container">
        <div class="row">

          <!-- Bike Purchased -->
          <div class="col-md-4 mb-4 d-flex gap-3">
            <img src="https://img.icons8.com/?size=100&id=9334&format=png&color=000000" alt="Bike" width="100">
            <div>
            <h4 class="fw-bold text-black mt-2 fs-2">5000+</h4>
            <p class="fw-semibold text-black">Bike Purchased</p>
            </div>
          </div>

          <!-- Average Rating -->
          <div class="col-md-4 mb-4 d-flex gap-3">
            <i class="bi bi-star-fill" style="font-size: 70px; color: black;"></i>
            <div>
            <h4 class="fw-bold text-black mt-2 fs-2">4.5</h4>
            <p class="fw-semibold text-black">Average Rating</p>
            </div>
          </div>

          <!-- Years of Experience -->
          <div class="col-md-4 mb-4 d-flex gap-3">
            <i class="bi bi-patch-check-fill" style="font-size: 70px; color: black;"></i>
            <div>
            <h4 class="fw-bold text-black mt-2 fs-2">25+</h4>
            <p class="fw-semibold text-black">Years Experience</p>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>


<!-- Reviews -->
<div class="container mb-5">
  <div class="row justify-content-center">

    {% for review in reviews %}
      <div class="col-md-4 mb-4">
        <div class="card rounded-4 h-100" style="box-shadow: 7px 7px 14px 6px #0f6152; border: 1px solid #07435C;">
          <img src="{% if review.image %}{{ review.image.url }}{% else %}{% static 'core/images/default_user.webp' %}{% endif %}"
               class="card-img-top rounded-top" style="height: 250px; object-fit: cover;" alt="{{ review.name }}">

          <div class="card-body text-center">
            <h5 class="card-title fw-bold">{{ review.name }}</h5>
            <p class="card-text fst-italic">“{{ review.review }}”</p>
          </div>
        </div>
      </div>
    {% endfor %}

  </div>

  <div class="text-center mt-4">
    <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#reviewModal">
      Leave a Review
    </button>
  </div>
</div>

<!-- Review Modal -->
<div class="modal fade" id="reviewModal" tabindex="-1" aria-labelledby="reviewModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content p-4 rounded-4 border-0 shadow-lg">
      <div class="modal-header border-0">
        <h5 class="modal-title fw-bold" id="reviewModalLabel">Leave a Review</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="modal-body">

          <!-- Name -->
          <div class="mb-3">
            <label for="id_name" class="form-label fw-semibold">Your Name</label>
            <input type="text" name="name" maxlength="100" class="form-control rounded-3" required id="id_name">
          </div>

          <!-- Review Text -->
          <div class="mb-3">
            <label for="id_review" class="form-label fw-semibold">Your Review</label>
            <textarea name="review" cols="40" rows="4" class="form-control rounded-3" required id="id_review"></textarea>
          </div>

          <!-- Image Upload -->
          <div class="mb-3">
            <label for="id_image" class="form-label fw-semibold">Your Image (Optional)</label>
            <input type="file" name="image" accept="image/*" class="form-control rounded-3" id="id_image">
            <div class="form-text">If not provided, a default image will be used.</div>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="modal-footer border-0">
          <button type="submit" class="btn btn-primary px-4 fw-semibold">Submit Review</button>
        </div>
      </form>

    </div>
  </div>
</div>


<!-- Trusted Riders -->
<section class="py-5" style="background-color: #07435C;">
  <div class="container">
    <div class="row align-items-center justify-content-center text-white">
      <!-- Text Column -->
      <div class="col-md-6 mb-4 mb-md-0 text-center">
        <h2 class="fw-bold">{{ trusted_riders_section.heading }}</h2>
        <p class="fs-5">{{ trusted_riders_section.description }}</p>
      </div>

      <!-- Image Column -->
      <div class="col-md-6 text-end">
        {% if trusted_riders_section.image %}
          <img src="{{ trusted_riders_section.image.url }}" alt="Trusted Riders" class="img-fluid rounded-5"
               style="max-height: 300px; max-width: 100%; border: 5px solid white; box-shadow: 9px 10px 4px white;">
        {% endif %}
      </div>
    </div>
  </div>
</section>

<!-- FaQ -->
 <!-- Bootstrap FAQ Section -->
<div class="faq-section container my-5">
  <div class="bg-cyan-50 p-4 p-md-5 rounded ">
    <h2 class="text-center fw-semibold mb-4">Frequently Asked Questions</h2>
    <div class="accordion" id="faqAccordion">
      {% for faq in faqs %}
        <div class="accordion-item mb-3 border-0 shadow-sm rounded">
          <h2 class="accordion-header" id="heading{{ forloop.counter }}">
            <button class="accordion-button collapsed fw-medium" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="false"
                    aria-controls="collapse{{ forloop.counter }}">
              {{ forloop.counter }}. {{ faq.question }}
            </button>
          </h2>
          <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse"
               aria-labelledby="heading{{ forloop.counter }}" data-bs-parent="#faqAccordion">
            <div class="accordion-body text-muted small">
              {{ faq.answer }}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>



<script>
  const images = [
    {% for img in carousel_images %}
      "{{ img.image.url }}"{% if not forloop.last %},{% endif %}
    {% endfor %}
  ];

  let index = 0;
  const imgElement = document.getElementById('bikeImage');

  setInterval(() => {
    index = (index + 1) % images.length;
    imgElement.src = images[index];
  }, 2000);
</script>

{% endblock %}
